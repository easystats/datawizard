<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='This function can be used to adjust the data for the effect of other
variables present in the dataset. It is based on an underlying fitting of
regressions models, allowing for quite some flexibility, such as including
factors as random effects in mixed models (multilevel partialization),
continuous variables as smooth terms in general additive models (non-linear
partialization) and/or fitting these models under a Bayesian framework. The
values returned by this function are the residuals of the regression models.
Note that a regular correlation between two "adjusted" variables is
equivalent to the partial correlation between them.'><title>Adjust data for the effect of other variable(s) — adjust • datawizard</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.0/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.2/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.2/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.2/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Adjust data for the effect of other variable(s) — adjust"><meta property="og:description" content='This function can be used to adjust the data for the effect of other
variables present in the dataset. It is based on an underlying fitting of
regressions models, allowing for quite some flexibility, such as including
factors as random effects in mixed models (multilevel partialization),
continuous variables as smooth terms in general additive models (non-linear
partialization) and/or fitting these models under a Bayesian framework. The
values returned by this function are the residuals of the regression models.
Note that a regular correlation between two "adjusted" variables is
equivalent to the partial correlation between them.'><meta property="og:image" content="https://easystats.github.io/datawizard/reference/figures/card.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@easystats4u"><meta name="twitter:site" content="@easystats4u"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">datawizard</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.2.5</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html" aria-label="Reference">
    <span class="fa fa fa fa-file-code"></span>
     
    Reference
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/index.html" aria-label="Articles">
    <span class="fa fa fa fa-book-reader"></span>
     
    Articles
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html" aria-label="News">
    <span class="fa fa fa fa-newspaper"></span>
     
    News
  </a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--easystats" aria-label="easystats">
    <span class="fab fa fab fa-r-project"></span>
     
    easystats
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--easystats">
    <a class="external-link dropdown-item" href="https://easystats.github.io/bayestestR/">bayestestR</a>
    <a class="external-link dropdown-item" href="https://easystats.github.io/correlation/">correlation</a>
    <a class="dropdown-item" href="https://easystats.github.io/datawizard/">datawizard</a>
    <a class="external-link dropdown-item" href="https://easystats.github.io/easystats/">easystats</a>
    <a class="external-link dropdown-item" href="https://easystats.github.io/effectsize/">effectsize</a>
    <a class="external-link dropdown-item" href="https://easystats.github.io/insight/">insight</a>
    <a class="external-link dropdown-item" href="https://easystats.github.io/modelbased/">modelbased</a>
    <a class="external-link dropdown-item" href="https://easystats.github.io/performance/">performance</a>
    <a class="external-link dropdown-item" href="https://easystats.github.io/parameters/">parameters</a>
    <a class="external-link dropdown-item" href="https://easystats.github.io/report/">report</a>
    <a class="external-link dropdown-item" href="https://easystats.github.io/see/">see</a>
  </div>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="http://twitter.com/easystats4u" aria-label="Twitter">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/easystats/datawizard/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Adjust data for the effect of other variable(s)</h1>
      <small class="dont-index">Source: <a href="https://github.com/easystats/datawizard/blob/HEAD/R/adjust.R" class="external-link"><code>R/adjust.R</code></a></small>
      <div class="d-none name"><code>adjust.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function can be used to adjust the data for the effect of other
variables present in the dataset. It is based on an underlying fitting of
regressions models, allowing for quite some flexibility, such as including
factors as random effects in mixed models (multilevel partialization),
continuous variables as smooth terms in general additive models (non-linear
partialization) and/or fitting these models under a Bayesian framework. The
values returned by this function are the residuals of the regression models.
Note that a regular correlation between two "adjusted" variables is
equivalent to the partial correlation between them.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">adjust</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  effect <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  select <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  exclude <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  multilevel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  additive <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  bayesian <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  keep_intercept <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  ignore_case <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  regex <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">data_adjust</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  effect <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  select <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  exclude <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  multilevel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  additive <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  bayesian <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  keep_intercept <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  ignore_case <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  regex <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>A data frame.</p></dd>


<dt>effect</dt>
<dd><p>Character vector of column names to be adjusted for (regressed
out). If <code>NULL</code> (the default), all variables will be selected.</p></dd>


<dt>select</dt>
<dd><p>Variables that will be included when performing the required
tasks. Can be either</p><ul><li><p>a variable specified as a literal variable name (e.g., <code>column_name</code>),</p></li>
<li><p>a string with the variable name (e.g., <code>"column_name"</code>), or a character
vector of variable names (e.g., <code>c("col1", "col2", "col3")</code>),</p></li>
<li><p>a formula with variable names (e.g., <code>~column_1 + column_2</code>),</p></li>
<li><p>a vector of positive integers, giving the positions counting from the left
(e.g. <code>1</code> or <code>c(1, 3, 5)</code>),</p></li>
<li><p>a vector of negative integers, giving the positions counting from the
right (e.g., <code>-1</code> or <code>-1:-3</code>),</p></li>
<li><p>one of the following select-helpers: <code>starts_with()</code>, <code>ends_with()</code>,
<code>contains()</code>, a range using <code>:</code> or <code>regex("")</code>. <code>starts_with()</code>,
<code>ends_with()</code>, and  <code>contains()</code> accept several patterns, e.g
<code>starts_with("Sep", "Petal")</code>.</p></li>
<li><p>or a function testing for logical conditions, e.g. <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">is.numeric()</a></code> (or
<code>is.numeric</code>), or any user-defined function that selects the variables
for which the function returns <code>TRUE</code> (like: <code>foo &lt;- function(x) mean(x) &gt; 3</code>),</p></li>
<li><p>ranges specified via literal variable names, select-helpers (except
<code>regex()</code>) and (user-defined) functions can be negated, i.e. return
non-matching elements, when prefixed with a <code>-</code>, e.g. <code>-ends_with("")</code>,
<code>-is.numeric</code> or <code>-Sepal.Width:Petal.Length</code>. <strong>Note:</strong> Negation means
that matches are <em>excluded</em>, and thus, the <code>exclude</code> argument can be
used alternatively. For instance, <code>select=-ends_with("Length")</code> (with
<code>-</code>) is equivalent to <code>exclude=ends_with("Length")</code> (no <code>-</code>). In case
negation should not work as expected, use the <code>exclude</code> argument instead.</p></li>
</ul><p>If <code>NULL</code>, selects all columns. Patterns that found no matches are silently
ignored, e.g. <code>find_columns(iris, select = c("Species", "Test"))</code> will just
return <code>"Species"</code>.</p></dd>


<dt>exclude</dt>
<dd><p>See <code>select</code>, however, column names matched by the pattern
from <code>exclude</code> will be excluded instead of selected. If <code>NULL</code> (the default),
excludes no columns.</p></dd>


<dt>multilevel</dt>
<dd><p>If <code>TRUE</code>, the factors are included as random factors.
Else, if <code>FALSE</code> (default), they are included as fixed effects in the
simple regression model.</p></dd>


<dt>additive</dt>
<dd><p>If <code>TRUE</code>, continuous variables as included as smooth terms
in additive models. The goal is to regress-out potential non-linear
effects.</p></dd>


<dt>bayesian</dt>
<dd><p>If <code>TRUE</code>, the models are fitted under the Bayesian framework
using <code>rstanarm</code>.</p></dd>


<dt>keep_intercept</dt>
<dd><p>If <code>FALSE</code> (default), the intercept of the model is
re-added. This avoids the centering around 0 that happens by default
when regressing out another variable (see the examples below for a
visual representation of this).</p></dd>


<dt>ignore_case</dt>
<dd><p>Logical, if <code>TRUE</code> and when one of the select-helpers or
a regular expression is used in <code>select</code>, ignores lower/upper case in the
search pattern when matching against variable names.</p></dd>


<dt>regex</dt>
<dd><p>Logical, if <code>TRUE</code>, the search pattern from <code>select</code> will be
treated as regular expression. When <code>regex = TRUE</code>, select <em>must</em> be a
character string (or a variable containing a character string) and is not
allowed to be one of the supported select-helpers or a character vector
of length &gt; 1. <code>regex = TRUE</code> is comparable to using one of the two
select-helpers, <code>select = contains("")</code> or <code>select = regex("")</code>, however,
since the select-helpers may not work when called from inside other
functions (see 'Details'), this argument may be used as workaround.</p></dd>


<dt>verbose</dt>
<dd><p>Toggle warnings.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data frame comparable to <code>data</code>, with adjusted variables.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">adjusted_all</span> <span class="op">&lt;-</span> <span class="fu">adjust</span><span class="op">(</span><span class="va">attitude</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">adjusted_all</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        rating complaints privileges    learning     raises   critical</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  -8.1102953  5.5583770 -15.848949 -2.75102306  0.5742664  15.605502</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   1.6472337  0.0646564  -1.422592 -3.06207012 -1.5567655  -2.315781</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   1.0605589 -7.5116953  11.174609  5.59808033  4.8603132   8.061801</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  -0.2268416  3.8345277  -4.567441  0.03866933 -7.1185324  13.002574</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   6.5462010 -1.2420122  -3.051098  0.87312095 -2.7131349   6.500353</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 -10.9418499  5.2030745   2.664156 -1.24552098  4.1370346 -21.678382</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      advance</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  2.8684130</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  5.3937097</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 -6.4236221</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 -0.3951046</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  2.1988621</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 -3.1912418</span>
<span class="r-in"><span><span class="va">adjusted_one</span> <span class="op">&lt;-</span> <span class="fu">adjust</span><span class="op">(</span><span class="va">attitude</span>, effect <span class="op">=</span> <span class="st">"complaints"</span>, select <span class="op">=</span> <span class="st">"rating"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">adjusted_one</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        rating complaints privileges learning raises critical advance</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  -9.8614202         51         30       39     61       92      45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   0.3286522         64         51       54     63       73      47</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   3.8009933         70         68       69     76       86      48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  -0.9167380         63         45       47     54       84      35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   7.7641147         78         56       66     71       83      47</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 -12.8798594         55         49       44     54       49      34</span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="fu">adjust</span><span class="op">(</span><span class="va">attitude</span>, effect <span class="op">=</span> <span class="st">"complaints"</span>, select <span class="op">=</span> <span class="st">"rating"</span>, bayesian <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           rating complaints privileges learning raises critical advance</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   -9.972658871         51         30       39     61       92      45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    0.258963135         64         51       54     63       73      47</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    3.750480984         70         68       69     76       86      48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   -0.989623173         63         45       47     54       84      35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    7.739171450         78         56       66     71       83      47</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  -12.978313639         55         49       44     54       49      34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   -6.995277940         67         42       56     66       68      35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   -0.006587475         75         50       55     70       66      41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   -4.266483318         82         72       67     71       83      31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10   6.513204211         61         45       47     62       80      41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11   9.524513745         53         53       58     58       67      34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12   7.264617902         60         47       39     59       74      41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   7.761790519         62         57       42     55       63      25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14  -9.017897010         83         83       45     59       77      35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   4.490585141         77         54       72     79       77      46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16  -1.277792852         90         50       72     60       54      36</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17  -4.520724393         85         64       69     79       79      63</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18   5.264617902         60         65       75     55       80      60</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19  -2.249519016         70         46       57     75       85      46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20  -8.232554714         58         68       54     64       78      52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21   5.292891739         40         33       34     43       64      33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22   3.513204211         61         52       62     66       80      41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23 -11.243864249         66         52       50     63       80      37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24  -2.452867186         37         42       58     50       57      49</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25   7.773100053         54         42       48     66       75      33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26  -6.509414859         77         66       63     88       76      72</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27   6.993412525         75         58       74     80       78      49</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28  -9.481141022         57         44       45     51       83      38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29   6.479275607         85         71       71     77       74      55</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30   5.733516682         82         39       59     64       78      39</span>
<span class="r-in"><span><span class="fu">adjust</span><span class="op">(</span><span class="va">attitude</span>, effect <span class="op">=</span> <span class="st">"complaints"</span>, select <span class="op">=</span> <span class="st">"rating"</span>, additive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          rating complaints privileges learning raises critical advance</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   -9.86142016         51         30       39     61       92      45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    0.32865220         64         51       54     63       73      47</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    3.80099328         70         68       69     76       86      48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   -0.91673799         63         45       47     54       84      35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    7.76411473         78         56       66     71       83      47</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  -12.87985944         55         49       44     54       49      34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   -6.93517726         67         42       56     66       68      35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8    0.02794419         75         50       55     70       66      41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   -4.25432454         82         72       67     71       83      31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10   6.59248165         61         45       47     62       80      41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11   9.62936020         53         53       58     58       67      34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12   7.34709147         60         47       39     59       74      41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   7.83787183         62         57       42     55       63      25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14  -9.00893436         83         83       45     59       77      35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   4.51872455         77         54       72     79       77      46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16  -1.29120309         90         50       72     60       54      36</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17  -4.51815400         85         64       69     79       79      63</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18   5.34709147         60         65       75     55       80      60</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19  -2.19900672         70         46       57     75       85      46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20  -8.14368889         58         68       54     64       78      52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21   5.43928784         40         33       34     43       64      33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22   3.59248165         61         52       62     66       80      41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23 -11.18056744         66         52       50     63       80      37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24  -2.29688270         37         42       58     50       57      49</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25   7.87475038         54         42       48     66       75      33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26  -6.48127545         77         66       63     88       76      72</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27   7.02794419         75         58       74     80       78      49</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28  -9.38907907         57         44       45     51       83      38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29   6.48184600         85         71       71     77       74      55</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30   5.74567546         82         39       59     64       78      39</span>
<span class="r-in"><span><span class="va">attitude</span><span class="op">$</span><span class="va">complaints_LMH</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut</a></span><span class="op">(</span><span class="va">attitude</span><span class="op">$</span><span class="va">complaints</span>, <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">adjust</span><span class="op">(</span><span class="va">attitude</span>, effect <span class="op">=</span> <span class="st">"complaints_LMH"</span>, select <span class="op">=</span> <span class="st">"rating"</span>, multilevel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         rating complaints privileges learning raises critical advance</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   -9.9809282         51         30       39     61       92      45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    2.6250549         64         51       54     63       73      47</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   10.6250549         70         68       69     76       86      48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    0.6250549         63         45       47     54       84      35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    5.6503521         78         56       66     71       83      47</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  -17.3749451         55         49       44     54       49      34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   -2.3749451         67         42       56     66       68      35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   -4.3496479         75         50       55     70       66      41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   -3.3496479         82         72       67     71       83      31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10   6.6250549         61         45       47     62       80      41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11  11.0190718         53         53       58     58       67      34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12   6.6250549         60         47       39     59       74      41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   8.6250549         62         57       42     55       63      25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14  -7.3496479         83         83       45     59       77      35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   1.6503521         77         54       72     79       77      46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   5.6503521         90         50       72     60       54      36</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17  -1.3496479         85         64       69     79       79      63</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18   4.6250549         60         65       75     55       80      60</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19   4.6250549         70         46       57     75       85      46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20 -10.3749451         58         68       54     64       78      52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21  -2.9809282         40         33       34     43       64      33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22   3.6250549         61         52       62     66       80      41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23  -7.3749451         66         52       50     63       80      37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24 -12.9809282         37         42       58     50       57      49</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25  10.0190718         54         42       48     66       75      33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26  -9.3496479         77         66       63     88       76      72</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27   2.6503521         75         58       74     80       78      49</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28 -12.3749451         57         44       45     51       83      38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29   9.6503521         85         71       71     77       74      55</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30   6.6503521         82         39       59     64       78      39</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    complaints_LMH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     (36.9,54.7]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     (54.7,72.3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     (54.7,72.3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     (54.7,72.3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     (72.3,90.1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     (54.7,72.3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7     (54.7,72.3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8     (72.3,90.1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9     (72.3,90.1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10    (54.7,72.3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11    (36.9,54.7]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12    (54.7,72.3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13    (54.7,72.3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14    (72.3,90.1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15    (72.3,90.1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16    (72.3,90.1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17    (72.3,90.1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18    (54.7,72.3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19    (54.7,72.3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20    (54.7,72.3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21    (36.9,54.7]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22    (54.7,72.3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23    (54.7,72.3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24    (36.9,54.7]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25    (36.9,54.7]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26    (72.3,90.1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27    (72.3,90.1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28    (54.7,72.3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29    (72.3,90.1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30    (72.3,90.1]</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Generate data</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">simulate_correlation</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">100</span>, r <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data</span><span class="op">$</span><span class="va">V2</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fl">5</span> <span class="op">*</span> <span class="va">data</span><span class="op">$</span><span class="va">V2</span><span class="op">)</span> <span class="op">+</span> <span class="fl">20</span> <span class="co"># Add intercept</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Adjust</span></span></span>
<span class="r-in"><span><span class="va">adjusted</span> <span class="op">&lt;-</span> <span class="fu">adjust</span><span class="op">(</span><span class="va">data</span>, effect <span class="op">=</span> <span class="st">"V1"</span>, select <span class="op">=</span> <span class="st">"V2"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">adjusted_icpt</span> <span class="op">&lt;-</span> <span class="fu">adjust</span><span class="op">(</span><span class="va">data</span>, effect <span class="op">=</span> <span class="st">"V1"</span>, select <span class="op">=</span> <span class="st">"V2"</span>, keep_intercept <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Visualize</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">V1</span>, <span class="va">data</span><span class="op">$</span><span class="va">V2</span>,</span></span>
<span class="r-in"><span>  pch <span class="op">=</span> <span class="fl">19</span>, col <span class="op">=</span> <span class="st">"blue"</span>,</span></span>
<span class="r-in"><span>  ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">adjusted</span><span class="op">$</span><span class="va">V2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">V2</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  main <span class="op">=</span> <span class="st">"Original (blue), adjusted (green), and adjusted - intercept kept (red) data"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">V2</span> <span class="op">~</span> <span class="va">V1</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span><span class="va">adjusted</span><span class="op">$</span><span class="va">V1</span>, <span class="va">adjusted</span><span class="op">$</span><span class="va">V2</span>, pch <span class="op">=</span> <span class="fl">19</span>, col <span class="op">=</span> <span class="st">"green"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">V2</span> <span class="op">~</span> <span class="va">V1</span>, data <span class="op">=</span> <span class="va">adjusted</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"green"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span><span class="va">adjusted_icpt</span><span class="op">$</span><span class="va">V1</span>, <span class="va">adjusted_icpt</span><span class="op">$</span><span class="va">V2</span>, pch <span class="op">=</span> <span class="fl">19</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">V2</span> <span class="op">~</span> <span class="va">V1</span>, data <span class="op">=</span> <span class="va">adjusted_icpt</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="adjust-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://sites.google.com/site/indrajeetspatilmorality/" class="external-link">Indrajeet Patil</a>, <a href="https://dominiquemakowski.github.io/" class="external-link">Dominique Makowski</a>, <a href="https://github.com/strengejacke" class="external-link">Daniel Lüdecke</a>, <a href="https://home.msbstats.info/" class="external-link">Mattan S. Ben-Shachar</a>, <a href="https://wiernik.org/" class="external-link">Brenton M. Wiernik</a>, <a href="https://www.etiennebacher.com/" class="external-link">Etienne Bacher</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.9000.</p>
</div>

    </footer></div>

  

  

  </body></html>

