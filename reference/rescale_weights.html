<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Rescale design weights for multilevel analysis — rescale_weights • datawizard</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- katex math --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script><script src="../katex-auto.js"></script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Rescale design weights for multilevel analysis — rescale_weights"><meta name="description" content="Most functions to fit multilevel and mixed effects models only
allow the user to specify frequency weights, but not design (i.e., sampling
or probability) weights, which should be used when analyzing complex samples
(e.g., probability samples). rescale_weights() implements two algorithms,
one proposed by Asparouhov (2006) and Carle (2009), to rescale
design weights in survey data to account for the grouping structure of
multilevel models, and one based on the design effect proposed by
Kish (1965), to rescale weights by the design effect to account for
additional sampling error introduced by weighting."><meta property="og:description" content="Most functions to fit multilevel and mixed effects models only
allow the user to specify frequency weights, but not design (i.e., sampling
or probability) weights, which should be used when analyzing complex samples
(e.g., probability samples). rescale_weights() implements two algorithms,
one proposed by Asparouhov (2006) and Carle (2009), to rescale
design weights in survey data to account for the grouping structure of
multilevel models, and one based on the design effect proposed by
Kish (1965), to rescale weights by the design effect to account for
additional sampling error introduced by weighting."><meta property="og:image" content="https://easystats.github.io/datawizard/reference/figures/card.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@easystats4u"><meta name="twitter:site" content="@easystats4u"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">datawizard</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html" aria-label="Reference"><span class="fa fa-file-code"></span> Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html" aria-label="Articles"><span class="fa fa-book-reader"></span> Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html" aria-label="News"><span class="fa fa-newspaper"></span> News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-easystats" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="easystats"><span class="fa fab fa-r-project"></span> easystats</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-easystats"><li><a class="external-link dropdown-item" href="https://easystats.github.io/bayestestR/">bayestestR</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/correlation/">correlation</a></li>
    <li><a class="dropdown-item" href="https://easystats.github.io/datawizard/">datawizard</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/easystats/">easystats</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/effectsize/">effectsize</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/insight/">insight</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/modelbased/">modelbased</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/performance/">performance</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/parameters/">parameters</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/report/">report</a></li>
    <li><a class="external-link dropdown-item" href="https://easystats.github.io/see/">see</a></li>
  </ul></li>
<li class="nav-item"><a class="external-link nav-link" href="http://twitter.com/easystats4u" aria-label="Twitter"><span class="fa fa-twitter"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/easystats/datawizard/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Rescale design weights for multilevel analysis</h1>
      <small class="dont-index">Source: <a href="https://github.com/easystats/datawizard/blob/main/R/rescale_weights.R" class="external-link"><code>R/rescale_weights.R</code></a></small>
      <div class="d-none name"><code>rescale_weights.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Most functions to fit multilevel and mixed effects models only
allow the user to specify frequency weights, but not design (i.e., sampling
or probability) weights, which should be used when analyzing complex samples
(e.g., probability samples). <code>rescale_weights()</code> implements two algorithms,
one proposed by <cite>Asparouhov (2006)</cite> and <cite>Carle (2009)</cite>, to rescale
design weights in survey data to account for the grouping structure of
multilevel models, and one based on the design effect proposed by
<cite>Kish (1965)</cite>, to rescale weights by the design effect to account for
additional sampling error introduced by weighting.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rescale_weights</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  probability_weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nest <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"carle"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame.</p></dd>


<dt id="arg-probability-weights">probability_weights<a class="anchor" aria-label="anchor" href="#arg-probability-weights"></a></dt>
<dd><p>Variable indicating the probability (design or
sampling) weights of the survey data (level-1-weight), provided as character
string or formula.</p></dd>


<dt id="arg-by">by<a class="anchor" aria-label="anchor" href="#arg-by"></a></dt>
<dd><p>Variable names (as character vector, or as formula), indicating
the grouping structure (strata) of the survey data (level-2-cluster
variable). It is also possible to create weights for multiple group
variables; in such cases, each created weighting variable will be suffixed
by the name of the group variable. This argument is required for
<code>method = "carle"</code>, but optional for <code>method = "kish"</code>.</p></dd>


<dt id="arg-nest">nest<a class="anchor" aria-label="anchor" href="#arg-nest"></a></dt>
<dd><p>Logical, if <code>TRUE</code> and <code>by</code> indicates at least two group
variables, then groups are "nested", i.e. groups are now a combination from
each group level of the variables in <code>by</code>. This argument is not used when
<code>method = "kish"</code>.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>String, indicating which rescale-method is used for rescaling
weights. Can be either <code>"carle"</code> (default) or <code>"kish"</code>. See 'Details'. If
<code>method = "carle"</code>, the <code>by</code> argument is required.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>data</code>, including the new weighting variable(s). For <code>method = "carle"</code>, new
columns <code>rescaled_weights_a</code> and <code>rescaled_weights_b</code> are returned, and for
<code>method = "kish"</code>, the returned data contains a column <code>rescaled_weights</code>.
These represent the rescaled design weights to use in multilevel models (use
these variables for the <code>weights</code> argument).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<ul><li><p><code>method = "carle"</code></p>
<p>Rescaling is based on two methods: For <code>rescaled_weights_a</code>, the sample
weights <code>probability_weights</code> are adjusted by a factor that represents the
proportion of group size divided by the sum of sampling weights within each
group. The adjustment factor for <code>rescaled_weights_b</code> is the sum of sample
weights within each group divided by the sum of squared sample weights
within each group (see Carle (2009), Appendix B). In other words,
<code>rescaled_weights_a</code> "scales the weights so that the new weights sum to the
cluster sample size" while <code>rescaled_weights_b</code> "scales the weights so that
the new weights sum to the effective cluster size".</p>
<p>Regarding the choice between scaling methods A and B, Carle suggests that
"analysts who wish to discuss point estimates should report results based
on weighting method A. For analysts more interested in residual
between-group variance, method B may generally provide the least biased
estimates". In general, it is recommended to fit a non-weighted model and
weighted models with both scaling methods and when comparing the models,
see whether the "inferential decisions converge", to gain confidence in the
results.</p>
<p>Though the bias of scaled weights decreases with increasing group size,
method A is preferred when insufficient or low group size is a concern.</p>
<p>The group ID and probably PSU may be used as random effects (e.g. nested
design, or group and PSU as varying intercepts), depending on the survey
design that should be mimicked.</p></li>
<li><p><code>method = "kish"</code></p>
<p>Rescaling is based on scaling the sample weights so the mean value is 1,
which means the sum of all weights equals the sample size. Next, the design
effect (<em>Kish 1965</em>) is calculated, which is the mean of the squared
weights divided by the squared mean of the weights. The scaled sample
weights are then divided by the design effect. This method is most
appropriate when weights are based on additional variables beyond the
grouping variables in the model (e.g., other demographic characteristics),
but may also be useful in other contexts.</p>
<p>Some tests on real-world survey-data suggest that, in comparison to the
Carle-method, the Kish-method comes closer to estimates from a regular
survey-design using the <strong>survey</strong> package. Note that these tests are not
representative and it is recommended to check your results against a
standard survey-design.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>

<ul><li><p>Asparouhov T. (2006). General Multi-Level Modeling with Sampling
Weights. Communications in Statistics - Theory and Methods 35: 439-460</p></li>
<li><p>Carle A.C. (2009). Fitting multilevel models in complex survey data
with design weights: Recommendations. BMC Medical Research Methodology
9(49): 1-13</p></li>
<li><p>Kish, L. (1965) Survey Sampling. London: Wiley.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">nhanes_sample</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">rescale_weights</span><span class="op">(</span><span class="va">nhanes_sample</span>, <span class="st">"WTINT2YR"</span>, <span class="st">"SDMVSTRA"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   total  age RIAGENDR RIDRETH1 SDMVPSU SDMVSTRA WTINT2YR rescaled_weights_a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     1 2.20        1        3       2       31 97593.68          1.5733612</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     7 2.08        2        3       1       29 39599.36          0.6231745</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     3 1.48        2        1       2       42 26619.83          0.8976966</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     4 1.32        2        4       2       33 34998.53          0.7083628</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     1 2.00        2        1       1       41 14746.45          0.4217782</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     6 2.20        2        4       1       38 28232.10          0.6877550</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rescaled_weights_b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          1.2005159</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          0.5246593</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          0.5439111</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          0.5498944</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          0.3119698</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6          0.5155503</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># also works with multiple group-variables</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">rescale_weights</span><span class="op">(</span><span class="va">nhanes_sample</span>, <span class="st">"WTINT2YR"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SDMVSTRA"</span>, <span class="st">"SDMVPSU"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   total  age RIAGENDR RIDRETH1 SDMVPSU SDMVSTRA WTINT2YR pweight_a_SDMVSTRA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     1 2.20        1        3       2       31 97593.68          1.5733612</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     7 2.08        2        3       1       29 39599.36          0.6231745</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     3 1.48        2        1       2       42 26619.83          0.8976966</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     4 1.32        2        4       2       33 34998.53          0.7083628</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     1 2.00        2        1       1       41 14746.45          0.4217782</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     6 2.20        2        4       1       38 28232.10          0.6877550</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   pweight_b_SDMVSTRA pweight_a_SDMVPSU pweight_b_SDMVPSU</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          1.2005159         1.8458164         1.3699952</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          0.5246593         0.8217570         0.5780808</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          0.5439111         0.5034683         0.3736824</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          0.5498944         0.6619369         0.4913004</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          0.3119698         0.3060151         0.2152722</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6          0.5155503         0.5858662         0.4121388</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># or nested structures.</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">rescale_weights</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">nhanes_sample</span>,</span></span>
<span class="r-in"><span>  probability_weights <span class="op">=</span> <span class="st">"WTINT2YR"</span>,</span></span>
<span class="r-in"><span>  by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SDMVSTRA"</span>, <span class="st">"SDMVPSU"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  nest <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   total  age RIAGENDR RIDRETH1 SDMVPSU SDMVSTRA WTINT2YR rescaled_weights_a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     1 2.20        1        3       2       31 97593.68          1.6532834</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     7 2.08        2        3       1       29 39599.36          0.5492655</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     3 1.48        2        1       2       42 26619.83          0.8341084</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     4 1.32        2        4       2       33 34998.53          0.7937824</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     1 2.00        2        1       1       41 14746.45          0.4285939</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     6 2.20        2        4       1       38 28232.10          0.6215579</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rescaled_weights_b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          1.3583967</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          0.4875798</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          0.5891700</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          0.5941006</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          0.3068214</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6          0.4759935</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># compare different methods, using multilevel-Poisson regression</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu">rescale_weights</span><span class="op">(</span><span class="va">nhanes_sample</span>, <span class="st">"WTINT2YR"</span>, <span class="st">"SDMVSTRA"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result1</span> <span class="op">&lt;-</span> <span class="fu">lme4</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lme4/man/glmer.html" class="external-link">glmer</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">total</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">RIAGENDR</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">RIDRETH1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span> <span class="op">|</span> <span class="va">SDMVPSU</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">poisson</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">d</span>,</span></span>
<span class="r-in"><span>  weights <span class="op">=</span> <span class="va">rescaled_weights_a</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result2</span> <span class="op">&lt;-</span> <span class="fu">lme4</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lme4/man/glmer.html" class="external-link">glmer</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">total</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">RIAGENDR</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">RIDRETH1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span> <span class="op">|</span> <span class="va">SDMVPSU</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">poisson</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">d</span>,</span></span>
<span class="r-in"><span>  weights <span class="op">=</span> <span class="va">rescaled_weights_b</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu">rescale_weights</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">nhanes_sample</span>,</span></span>
<span class="r-in"><span>  <span class="st">"WTINT2YR"</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"kish"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result3</span> <span class="op">&lt;-</span> <span class="fu">lme4</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lme4/man/glmer.html" class="external-link">glmer</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">total</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">RIAGENDR</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">RIDRETH1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span> <span class="op">|</span> <span class="va">SDMVPSU</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">poisson</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">d</span>,</span></span>
<span class="r-in"><span>  weights <span class="op">=</span> <span class="va">rescaled_weights</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu">rescale_weights</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">nhanes_sample</span>,</span></span>
<span class="r-in"><span>  <span class="st">"WTINT2YR"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"SDMVSTRA"</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"kish"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result4</span> <span class="op">&lt;-</span> <span class="fu">lme4</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lme4/man/glmer.html" class="external-link">glmer</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">total</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">RIAGENDR</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">RIDRETH1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span> <span class="op">|</span> <span class="va">SDMVPSU</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">poisson</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">d</span>,</span></span>
<span class="r-in"><span>  weights <span class="op">=</span> <span class="va">rescaled_weights</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">parameters</span><span class="fu">::</span><span class="fu"><a href="https://easystats.github.io/parameters/reference/compare_parameters.html" class="external-link">compare_parameters</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">result1</span>, <span class="va">result2</span>, <span class="va">result3</span>, <span class="va">result4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  exponentiate <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  column_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Carle (A)"</span>, <span class="st">"Carle (B)"</span>, <span class="st">"Kish"</span>, <span class="st">"Kish (grouped)"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Number of weighted observations differs from number of unweighted</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   observations.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Parameter    |            Carle (A) |            Carle (B)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ----------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (Intercept)  | 12.20 (10.52, 14.14) | 11.95 (10.27, 13.92)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> RIAGENDR [2] |  0.41 ( 0.40,  0.42) |  0.42 ( 0.40,  0.43)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age [log]    |  1.69 ( 1.63,  1.75) |  1.66 ( 1.60,  1.73)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> RIDRETH1 [2] |  0.90 ( 0.84,  0.97) |  0.90 ( 0.83,  0.98)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> RIDRETH1 [3] |  1.19 ( 1.14,  1.24) |  1.21 ( 1.16,  1.27)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> RIDRETH1 [4] |  2.16 ( 2.07,  2.26) |  2.16 ( 2.06,  2.28)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> RIDRETH1 [5] |  1.01 ( 0.95,  1.07) |  1.05 ( 0.97,  1.12)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ----------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Observations |                 2617 |                 1965</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Parameter    |                Kish |       Kish (grouped)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (Intercept)  | 11.72 (9.89, 13.87) | 11.95 (10.27, 13.92)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> RIAGENDR [2] |  0.42 (0.41,  0.43) |  0.42 ( 0.40,  0.43)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age [log]    |  1.66 (1.59,  1.73) |  1.66 ( 1.60,  1.73)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> RIDRETH1 [2] |  0.98 (0.90,  1.07) |  0.90 ( 0.83,  0.98)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> RIDRETH1 [3] |  1.23 (1.17,  1.29) |  1.21 ( 1.16,  1.27)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> RIDRETH1 [4] |  2.11 (1.99,  2.23) |  2.16 ( 2.06,  2.28)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> RIDRETH1 [5] |  1.09 (1.01,  1.18) |  1.05 ( 0.97,  1.12)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Observations |                1903 |                 1965</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://sites.google.com/site/indrajeetspatilmorality/" class="external-link">Indrajeet Patil</a>, <a href="https://www.etiennebacher.com/" class="external-link">Etienne Bacher</a>, <a href="https://dominiquemakowski.github.io/" class="external-link">Dominique Makowski</a>, <a href="https://github.com/strengejacke" class="external-link">Daniel Lüdecke</a>, <a href="https://home.msbstats.info/" class="external-link">Mattan S. Ben-Shachar</a>, <a href="https://wiernik.org/" class="external-link">Brenton M. Wiernik</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer></div>





  </body></html>

